<div class="container p-2 rounded show-container">
  <div class="my-3 text-center">
    <h2 class><%= @recipe.name%></h2>
  </div>
  <div>
    <div class="split">
      <div class="d-flex justify-content-between p-2">
        <h5> Preparation time: <%= @recipe.preparationTime %> min </h5>
        <div class="public-btn">
        <% if @recipe.public %>
          Public: <input type="checkbox" checked="true" class="mx-4" >
        <% end %>
        <% if !@recipe.public %>
          Public: <input type="checkbox" class="mx-4" >
        <% end %>
      </div>
      </div>
    </div>
    <div>
      <h5 class="p-2"> Cooking time: <%= @recipe.cookingTime %> min </h5>
    </div>
    <div class="d-flex justify-content-around">
    <div class="w-30 foods-btn">
      <a "Generate shopping list" class= "btn btn-primary btn-floating mx-1 click_btns">Generate shopping list</a>
    </div>
    <div class="foods-btn">
      <a class= "btn btn-primary btn-floating mx-1 click_btn">Add ingredient</a>
    </div>
    </div>
  </div>
</div>
<hr class="divider">
<% if @recipe.recipe_foods.empty? %>
  <p class="no-food">No ingredients added yet. Please use the button above ☝️ to add a new ingredient</p>
<% else %>
<table class="table table-hover table-striped table-bordered">
  <thead class="bg-color">
    <tr>
      <th scope="col">Food</th>
      <th scope="col">Quantity</th>
      <th scope="col">Value</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @recipe.recipe_foods.each do |recipe| %>
      <tr>
        <td><%= recipe.food.food %></td>
        <td><%= recipe.quantity %><%= recipe.food.measurement_unit %></td>
        <td>$<%= recipe.quantity * recipe.food.unit_price %></td>
        <td>
          <% if can? :destroy, recipe %>
            <%= link_to 'Remove', recipe_recipe_food_path(@recipe.id, recipe.id), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' },
            class: "btn btn-outline-danger", type:"button" %>
          <% end %>
        </td>
      </tr> 
    <% end %>
  </tbody>
</table>
<% end %>
<div class='modals'>
  <%= render 'add_shopping_list' %>
</div>

<script>
  document.querySelector('.click_btns').addEventListener('click', (event) => {
    document.querySelector('.modals').style.display = 'block'
  })

  document.querySelector('.modal-contents > div:first-of-type > span').addEventListener('click', () => {
    document.querySelector('.modals').style.display = 'none'
  })

</script>